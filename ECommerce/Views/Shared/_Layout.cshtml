@using ECommerce.Data
@inject IHttpContextAccessor HttpContextAccessor
@inject ApplicationDbContext _context

@{
    int? IShopId = HttpContextAccessor.HttpContext?.Session.GetInt32("IShopId");
}

<!DOCTYPE html>

<!--[if IE 8 ]><html class="ie" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<!--<![endif]-->
<!-- Mirrored from themesflat.co/html/modave/home-cosmetic.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 07 Mar 2025 10:36:29 GMT -->
<head>
    <meta charset="utf-8">
    <title>IShop - Multipurpose eCommerce</title>
    <!--
    <meta name="author" content="themesflat.com">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="Themesflat Modave, Multipurpose eCommerce Template">
    -->
    <!-- font -->
    <link rel="stylesheet" href="~/content/fonts/fonts.css" />
    <link rel="stylesheet" href="~/content/fonts/font-icons.css">
    <link rel="stylesheet" href="~/content/css/bootstrap.min.css">
    <link rel="stylesheet" href="~/content/css/swiper-bundle.min.css">
    <link rel="stylesheet" href="~/content/css/animate.css">
    <link rel="stylesheet" href="~/content/css/sib-styles.css">
    <link rel="stylesheet" type="text/css" href="~/content/css/styles.css" />

    <!-- Favicon and Touch Icons  -->
    <link rel="shortcut icon" href="~/content/images/logo/favicon.png">
    <link rel="apple-touch-icon-precomposed" href="~/content/images/logo/favicon.png">

</head>
<body class="preload-wrapper">

    <!-- Scroll Top -->
    <button id="scroll-top">
        <svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg">
            <g clip-path="url(#clip0_15741_24194)">
                <path d="M3 11.9175L12 2.91748L21 11.9175H16.5V20.1675C16.5 20.3664 16.421 20.5572 16.2803 20.6978C16.1397 20.8385 15.9489 20.9175 15.75 20.9175H8.25C8.05109 20.9175 7.86032 20.8385 7.71967 20.6978C7.57902 20.5572 7.5 20.3664 7.5 20.1675V11.9175H3Z" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
            </g>
            <defs>
                <clipPath id="clip0_15741_24194">
                    <rect width="24" height="24" fill="white" transform="translate(0 0.66748)" />
                </clipPath>
            </defs>
        </svg>
    </button>

    <!-- preload -->
    <div class="preload preload-container">
        <div class="preload-logo">
            <div class="spinner"></div>
        </div>
    </div>
    <!-- /preload -->

    <div id="wrapper">
        <header id="header" class="header-default">
            <div class="container">
                <div class="row wrapper-header align-items-center">
                    <div class="col-md-4 col-3 d-xl-none">
                        <a href="#mobileMenu" class="mobile-menu" data-bs-toggle="offcanvas" aria-controls="mobileMenu">
                            <i class="icon icon-categories"></i>
                        </a>
                    </div>
                    <div class="col-xl-2 col-md-4 col-6">
                        <a href="@Url.Action("Index", "Home")" class="logo-header">
                            <img src="~/content/images/logo/ishop_logo.svg" alt="logo" class="logo">
                        </a>
                    </div>
                    <div class="col-xl-8 d-none d-xl-block">
                        <nav class="box-navigation text-start">
                            @if (IShopId.HasValue)
                            {
                                <ul class="box-nav-ul d-flex align-items-start justify-content-start">
                                    <li class="menu-item active">
                                        <a href="@Url.Action("Index", "Home")" class="item-link">Home</a>
                                    </li>
                                    <li class="menu-item">
                                        <a href="@Url.Action("Products", "Home")" class="item-link">Products</a>
                                    </li>
                                    <li class="menu-item">
                                        <a href="@Url.Action("Orders", "Home")" class="item-link">My Orders</a>
                                    </li>
                                    <li class="menu-item">
                                        <a href="@Url.Action("TrackOrder", "Tracking")" class="item-link">Track Order</a>
                                    </li>
                                    <li class="menu-item">
                                        <a href="@Url.Action("MyAccount", "Home")" class="item-link">My Account</a>
                                    </li>
                                    <li class="menu-item">
                                        <a href="@Url.Action("AboutUs", "Home")" class="item-link">About Us</a>
                                    </li>
                                    <li class="menu-item">
                                        <a href="@Url.Action("ContactUs", "Home")" class="item-link">Contact Us</a>
                                    </li>
                                </ul>
                            }
                            else
                            {
                                <ul class="box-nav-ul d-flex align-items-start justify-content-start">
                                    <li class="menu-item active">
                                        <a href="@Url.Action("Index", "Home")" class="item-link">Home</a>
                                    </li>
                                    <li class="menu-item">
                                        <a href="@Url.Action("Products", "Home")" class="item-link">Products</a>
                                    </li>
                                    <li class="menu-item">
                                        <a href="@Url.Action("AboutUs", "Home")" class="item-link">About Us</a>
                                    </li>
                                    <li class="menu-item">
                                        <a href="@Url.Action("ContactUs", "Home")" class="item-link">Contact Us</a>
                                    </li>
                                </ul>
                            }
                        </nav>
                    </div>
                    <div class="col-xl-1 col-md-4 col-3">

                        <ul class="nav-icon d-flex justify-content-end align-items-center">
                            <li class="nav-search">
                                <a href="#search" data-bs-toggle="modal" class="nav-icon-item">
                                    <svg class="icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M11 19C15.4183 19 19 15.4183 19 11C19 6.58172 15.4183 3 11 3C6.58172 3 3 6.58172 3 11C3 15.4183 6.58172 19 11 19Z" stroke="#181818" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                        <path d="M21.35 21.0004L17 16.6504" stroke="#181818" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                    </svg>
                                </a>
                            </li>
                            <li class="nav-account">
                                <a href="#" class="nav-icon-item">
                                    <svg class="icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21" stroke="#181818" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                        <path d="M12 11C14.2091 11 16 9.20914 16 7C16 4.79086 14.2091 3 12 3C9.79086 3 8 4.79086 8 7C8 9.20914 9.79086 11 12 11Z" stroke="#181818" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                    </svg>
                                </a>
                                <div class="dropdown-account dropdown-login">
                                    @if (IShopId.HasValue)
                                    {
                                        <div class="sub-top">
                                            <a href="@Url.Action("MyAccount", "Home")" class="tf-btn btn-reset">Profile</a>
                                        </div>
                                    }
                                    else
                                    {
                                        <div class="sub-top">
                                            <a href="@Url.Action("Login", "Account")" class="tf-btn btn-reset">Login</a>
                                            <p class="text-center text-secondary-2">
                                                Don’t have an account? <a href="@Url.Action("Register", "Account")">Register</a>
                                            </p>
                                        </div>
                                    }
                                </div>
                            </li>
                            @* <li class="nav-wishlist">
                                <a href="wish-list.html" class="nav-icon-item">
                                    <svg class="icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M20.8401 4.60987C20.3294 4.09888 19.7229 3.69352 19.0555 3.41696C18.388 3.14039 17.6726 2.99805 16.9501 2.99805C16.2276 2.99805 15.5122 3.14039 14.8448 3.41696C14.1773 3.69352 13.5709 4.09888 13.0601 4.60987L12.0001 5.66987L10.9401 4.60987C9.90843 3.57818 8.50915 2.99858 7.05012 2.99858C5.59109 2.99858 4.19181 3.57818 3.16012 4.60987C2.12843 5.64156 1.54883 7.04084 1.54883 8.49987C1.54883 9.95891 2.12843 11.3582 3.16012 12.3899L4.22012 13.4499L12.0001 21.2299L19.7801 13.4499L20.8401 12.3899C21.3511 11.8791 21.7565 11.2727 22.033 10.6052C22.3096 9.93777 22.4519 9.22236 22.4519 8.49987C22.4519 7.77738 22.3096 7.06198 22.033 6.39452C21.7565 5.72706 21.3511 5.12063 20.8401 4.60987V4.60987Z" stroke="#181818" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                    </svg>
                                </a>
                            </li> *@
                            <li class="nav-cart">
                                <a href="@Url.Action("Cart", "Home")" class="nav-icon-item">
                                    <svg class="icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M16.5078 10.8734V6.36686C16.5078 5.17166 16.033 4.02541 15.1879 3.18028C14.3428 2.33514 13.1965 1.86035 12.0013 1.86035C10.8061 1.86035 9.65985 2.33514 8.81472 3.18028C7.96958 4.02541 7.49479 5.17166 7.49479 6.36686V10.8734M4.11491 8.62012H19.8877L21.0143 22.1396H2.98828L4.11491 8.62012Z" stroke="#181818" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                    </svg>
                                    <span id="cartItemCount" class="count-box">0</span>
                                </a>
                            </li>

                            @if (IShopId.HasValue)
                            {
                                <!--  Logout Button with SVG Icon -->
                                <li>
                                    <a href="/Account/Logout" class="logout-icon">
                                        <svg width="24" height="24" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M13.5 7.5L10.5 10.75M13.5 7.5L10.5 4.5M13.5 7.5L4 7.5M8 13.5H1.5L1.5 1.5L8 1.5" stroke="#000000" />
                                        </svg>
                                    </a>
                                </li>
                            }
                        </ul>
                    </div>
                </div>
            </div>
        </header>

        <div>
            @RenderBody()
        </div>

        <footer id="footer" class="footer">
            <div class="footer-wrap">
                <div class="footer-body">
                    <div class="container">
                        <div class="row">
                            <div class="col-lg-4">
                                <div class="footer-infor">
                                    <div class="footer-address">
                                        <p>202, Satyamev Eminence, Science City Road, Sola, Ahmedabad, Gujarat 380060</p>
                                        <a href="#" class="tf-btn-default fw-6">GET DIRECTION<i class="icon-arrowUpRight"></i></a>
                                    </div>
                                    <ul class="footer-info">
                                        <li>
                                            <i class="icon-mail"></i>
                                            <p>themesflat@gmail.com</p>
                                        </li>
                                        <li>
                                            <i class="icon-phone"></i>
                                            <p>315-666-6688</p>
                                        </li>
                                    </ul>
                                    <ul class="tf-social-icon">
                                        <li><a href="#" class="social-facebook"><i class="icon icon-fb"></i></a></li>
                                        <li><a href="#" class="social-twiter"><i class="icon icon-x"></i></a></li>
                                        <li><a href="#" class="social-instagram"><i class="icon icon-instagram"></i></a></li>
                                        <li><a href="#" class="social-amazon"><i class="icon icon-amazon"></i></a></li>
                                    </ul>
                                </div>
                            </div>
                            <div class="col-lg-4">
                                <div class="footer-menu">
                                    <div class="footer-col-block">
                                        <div class="footer-heading text-button footer-heading-mobile">
                                            Infomation
                                        </div>
                                        <div class="tf-collapse-content">
                                            <ul class="footer-menu-list">
                                                <li class="text-caption-1">
                                                    <a href="@Url.Action("AboutUs", "Home")" class="footer-menu_item">About Us</a>
                                                </li>
                                                <li class="text-caption-1">
                                                    <a href="@Url.Action("ContactUs", "Home")" class="footer-menu_item">Contact us</a>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="footer-col-block">
                                        <div class="footer-heading text-button footer-heading-mobile">
                                            Customer Services
                                        </div>
                                        <div class="tf-collapse-content">
                                            <ul class="footer-menu-list">
                                                <li class="text-caption-1">
                                                    <a href="#" class="footer-menu_item">Shipping</a>
                                                </li>
                                                <li class="text-caption-1">
                                                    <a href="#" class="footer-menu_item">Return & Refund</a>
                                                </li>
                                                <li class="text-caption-1">
                                                    <a href="#" class="footer-menu_item">Privacy Policy</a>
                                                </li>
                                                <li class="text-caption-1">
                                                    <a href="#" class="footer-menu_item">Terms & Conditions</a>
                                                </li>
                                                <li class="text-caption-1">
                                                    <a href="#" class="footer-menu_item">Orders FAQs</a>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="footer-bottom">
                    <div class="container">
                        <div class="row">
                            <div class="col-12">
                                <div class="footer-bottom-wrap">
                                    <div class="left">
                                        <p class="text-caption-1">©2025 IShop. All Rights Reserved.</p>
                                    </div>
                                    <div class="tf-payment">
                                        <p class="text-caption-1">Payment:</p>
                                        <ul>
                                            <li>
                                                <img src="~/content/images/payment/img-1.png" alt="">
                                            </li>
                                            <li>
                                                <img src="~/content/images/payment/img-2.png" alt="">
                                            </li>
                                            <li>
                                                <img src="~/content/images/payment/img-3.png" alt="">
                                            </li>
                                            <li>
                                                <img src="~/content/images/payment/img-4.png" alt="">
                                            </li>
                                            <li>
                                                <img src="~/content/images/payment/img-5.png" alt="">
                                            </li>
                                            <li>
                                                <img src="~/content/images/payment/img-6.png" alt="">
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </footer>
    </div>

    <!-- Common Modal for Success & Error Messages -->
    <div class="modal fade" id="messageModal" tabindex="-1" aria-labelledby="messageModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="messageModalLabel">Message</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-center">
                    <h5 id="messageText">Your message here.</h5>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">OK</button>
                </div>
            </div>
        </div>
    </div>

    <!-- mobile menu -->
    <div class="offcanvas offcanvas-start canvas-mb" id="mobileMenu">
        <span class="icon-close icon-close-popup" data-bs-dismiss="offcanvas" aria-label="Close"></span>
        <div class="mb-canvas-content">
            <div class="mb-body">
                <div class="mb-content-top">
                    @if (IShopId.HasValue)
                    {
                        <ul class="nav-ul-mb" id="wrapper-menu-navigation">
                            <li class="nav-mb-item active">
                                <a href="@Url.Action("Index", "Home")" class="item-link">Home</a>
                            </li>
                            <li class="nav-mb-item">
                                <a href="@Url.Action("Products", "Home")" class="item-link">Products</a>
                            </li>
                            <li class="nav-mb-item">
                                <a href="@Url.Action("Orders", "Home")" class="item-link">Orders</a>
                            </li>
                            <li class="nav-mb-item">
                                <a href="@Url.Action("TrackOrder", "Tracking")" class="item-link">Track Order</a>
                            </li>
                            <li class="nav-mb-item">
                                <a href="@Url.Action("MyAccount", "Home")" class="item-link">My Account</a>
                            </li>
                            <li class="nav-mb-item">
                                <a href="@Url.Action("AboutUs", "Home")" class="item-link">About Us</a>
                            </li>
                            <li class="nav-mb-item">
                                <a href="@Url.Action("ContactUs", "Home")" class="item-link">Contact Us</a>
                            </li>
                        </ul>
                    }
                    else
                    {
                        <ul class="nav-ul-mb" id="wrapper-menu-navigation">
                            <li class="nav-mb-item active">
                                <a href="@Url.Action("Index", "Home")" class="item-link">Home</a>
                            </li>
                            <li class="nav-mb-item">
                                <a href="@Url.Action("Products", "Home")" class="item-link">Products</a>
                            </li>
                            <li class="nav-mb-item">
                                <a href="@Url.Action("AboutUs", "Home")" class="item-link">About Us</a>
                            </li>
                            <li class="nav-mb-item">
                                <a href="@Url.Action("ContactUs", "Home")" class="item-link">Contact Us</a>
                            </li>
                        </ul>
                    }
                </div>
                <div class="mb-other-content">
                    <div class="group-icon">
                        @* <a href="wish-list.html" class="site-nav-icon">
                            <svg class="icon" width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M20.8401 4.60987C20.3294 4.09888 19.7229 3.69352 19.0555 3.41696C18.388 3.14039 17.6726 2.99805 16.9501 2.99805C16.2276 2.99805 15.5122 3.14039 14.8448 3.41696C14.1773 3.69352 13.5709 4.09888 13.0601 4.60987L12.0001 5.66987L10.9401 4.60987C9.90843 3.57818 8.50915 2.99858 7.05012 2.99858C5.59109 2.99858 4.19181 3.57818 3.16012 4.60987C2.12843 5.64156 1.54883 7.04084 1.54883 8.49987C1.54883 9.95891 2.12843 11.3582 3.16012 12.3899L4.22012 13.4499L12.0001 21.2299L19.7801 13.4499L20.8401 12.3899C21.3511 11.8791 21.7565 11.2727 22.033 10.6052C22.3096 9.93777 22.4519 9.22236 22.4519 8.49987C22.4519 7.77738 22.3096 7.06198 22.033 6.39452C21.7565 5.72706 21.3511 5.12063 20.8401 4.60987V4.60987Z" stroke="#181818" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                            </svg>
                            Wishlist
                        </a> *@
                        @if (IShopId.HasValue)
                        {
                                <a href="@Url.Action("Logout", "Account")" class="site-nav-icon">
                                <svg class="icon mt-2" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M13.5 7.5L10.5 10.75M13.5 7.5L10.5 4.5M13.5 7.5L4 7.5M8 13.5H1.5L1.5 1.5L8 1.5" stroke="#000000" />
                                </svg>
                                Logout
                            </a>
                        }
                        else{
                            <a href="@Url.Action("Login", "Account")" class="site-nav-icon">
                                <svg class="icon" width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21" stroke="#181818" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                    <path d="M12 11C14.2091 11 16 9.20914 16 7C16 4.79086 14.2091 3 12 3C9.79086 3 8 4.79086 8 7C8 9.20914 9.79086 11 12 11Z" stroke="#181818" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                </svg>
                                Login
                            </a>
                        }
                    </div>
                    <div class="mb-notice">
                        <a href="#" class="text-need">Need Help?</a>
                    </div>
                    <div class="mb-contact">
                        <p class="text-caption-1">202, Satyamev Eminence, Science City Road, Sola, Ahmedabad, Gujarat 380060</p>
                        <a href="#" class="tf-btn-default text-btn-uppercase">GET DIRECTION<i class="icon-arrowUpRight"></i></a>
                    </div>
                    <ul class="mb-info">
                        <li>
                            <i class="icon icon-mail"></i>
                            <p>themesflat@gmail.com</p>
                        </li>
                        <li>
                            <i class="icon icon-phone"></i>
                            <p>315-666-6688</p>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <!-- mobile menu -->
    <!-- Search Modal -->
    <div class="modal fade" id="search" tabindex="-1" aria-labelledby="searchLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="searchLabel">Search</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <input type="text" id="searchInput" class="form-control mb-3" placeholder="Type to search...">

                    <!-- Search Results -->
                    <div id="searchResults" class="row g-3"></div>

                    <!-- View All Button -->
                    <div class="wd-load view-more-button text-center mt-3">
                        <button id="viewAllBtn" class="tf-loading btn-loadmore tf-btn btn-reset">
                            <span class="text text-btn text-btn-uppercase">View All</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Javascript -->
    <script type="text/javascript" src="~/content/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="~/content/js/jquery.min.js"></script>
    <script type="text/javascript" src="~/content/js/swiper-bundle.min.js"></script>
    <script type="text/javascript" src="~/content/js/carousel.js"></script>
    <script type="text/javascript" src="~/content/js/bootstrap-select.min.js"></script>
    <script type="text/javascript" src="~/content/js/lazysize.min.js"></script>
    <script type="text/javascript" src="~/content/js/count-down.js"></script>
    <script type="text/javascript" src="~/content/js/wow.min.js"></script>
    <script type="text/javascript" src="~/content/js/multiple-modal.js"></script>
    <script type="text/javascript" src="~/content/js/main.js"></script>

    <!-- Include jQuery and DataTables -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
    <link rel="stylesheet" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script src="~/content/js/sibforms.js" defer></script>

    <script>
        window.REQUIRED_CODE_ERROR_MESSAGE = 'Please choose a country code';
        window.LOCALE = 'en';
        window.EMAIL_INVALID_MESSAGE = window.SMS_INVALID_MESSAGE = "The information provided is invalid. Please review the field format and try again.";

        window.REQUIRED_ERROR_MESSAGE = "This field cannot be left blank. ";

        window.GENERIC_INVALID_MESSAGE = "The information provided is invalid. Please review the field format and try again.";

        window.translation = {
            common: {
                selectedList: '{quantity} list selected',
                selectedLists: '{quantity} lists selected'
            }
        };

        var AUTOHIDE = Boolean(0);

        function showMessageModal(type, message) {
            let modalTitle = document.getElementById("messageModalLabel");
            let modalBody = document.getElementById("messageText");
            let modalHeader = document.querySelector("#messageModal .modal-header");

            // Update the modal based on type (success or error)
            if (type === "success") {
                modalTitle.innerText = "Success";
                modalBody.innerHTML = ` ${message}`;
                modalHeader.classList.add("bg-success", "text-white");
                modalHeader.classList.remove("bg-danger");
            } else if (type === "error") {
                modalTitle.innerText = "Error";
                modalBody.innerHTML = ` ${message}`;
                modalHeader.classList.add("bg-danger", "text-white");
                modalHeader.classList.remove("bg-success");
            }
            let messageModal = new bootstrap.Modal(document.getElementById("messageModal"));
            messageModal.show();
        }

        const input = document.getElementById("searchInput");
        const resultsDiv = document.getElementById("searchResults");
        const viewAllBtn = document.getElementById("viewAllBtn");

        let lastResults = [];

        viewAllBtn.classList.add("d-none");
        input.addEventListener("input", async function () {
            const query = input.value.trim();
            resultsDiv.innerHTML = "";

            if (query.length === 0) {
                viewAllBtn.classList.add("d-none");
                return;
            }

            resultsDiv.innerHTML = `<div class="text-center">Loading...</div>`;

            try {
                const response = await fetch(`/Home/SearchProduct?query=${encodeURIComponent(query)}`);
                const products = await response.json();

                lastResults = products;
                resultsDiv.innerHTML = "";

                if (products.length === 0) {
                    resultsDiv.innerHTML = `<div class="text-center text-muted">No results found</div>`;
                    viewAllBtn.classList.add("d-none");
                    return;
                }

                // Show top 4 only
                const topResults = products.slice(0, 4);
                renderProducts(topResults);
                setupSwatchHoverAndClick();

                viewAllBtn.classList.toggle("d-none", products.length <= 4);
            } catch (err) {
                console.error("Search error:", err);
                resultsDiv.innerHTML = `<div class="text-danger text-center">Error fetching results</div>`;
            }
        });

        viewAllBtn.addEventListener("click", function () {
            renderProducts(lastResults);
                setupSwatchHoverAndClick();
            viewAllBtn.classList.add("d-none");
        });

        // Function to render products as cards
        function renderProducts(productList) {
            const resultsDiv = document.getElementById("searchResults");
            resultsDiv.innerHTML = "";

            productList.forEach(p => {
                const productImages = p.productImages || [];
                const firstImage = productImages[0] || {};
                const imageUrl = firstImage.smallImage || "https://via.placeholder.com/100";
                const typeSlug = firstImage.typeSlug || "default-type";
                const colorSlug = firstImage.colorSlug || "default-color";

                const productUrl = `/home/productdetails/${p.slug}/${typeSlug}/${colorSlug}`;
                const nameLinkId = `product-name-link-${p.productId}`;

                const discount = firstImage.discount || 0;
                const mrp = firstImage.mrp || 0;
                const price = firstImage.price || 0;

                const discountBadge = discount > 0
                    ? `<div class="on-sale-wrap"><span class="on-sale-item">-${discount}%</span></div>`
                    : "";

                const priceHtml = discount > 0
                    ? `<span class="price"><span class="old-price">₹${mrp}</span> ₹${price}</span>`
                    : `<span class="price">₹${price}</span>`;

                const colorHtml = productImages.map((img, index) => {
                   return `
                       <li class="list-pcolor-item color-swatch active line"
                           data-image="${img.smallImage}"
                           data-color="${img.color}"
                           data-colorslug="${img.colorSlug}"
                           data-typeslug="${img.typeSlug}"
                           data-slug="${p.slug}">
                           <span class="swatch-value" style="background-color: ${img.color};"></span>
                       </li>
                   `;
                }).join('');

                const col = document.createElement("div");
                col.className = "col-6 col-md-3";

                col.innerHTML = `
                    <div class="card-product wow fadeInUp" data-wow-delay="0.1s">
                        <div class="card-product-wrapper">
                            <a href="${productUrl}" class="product-img">
                                <img class="lazyload img-product main-product-image" data-src="${imageUrl}" src="${imageUrl}" alt="${p.name}">
                                <img class="lazyload img-hover" data-src="${imageUrl}" src="${imageUrl}" alt="${p.name}">
                            </a>
                            ${discountBadge}
                            <div class="list-btn-main">
                                <a href="${productUrl}" class="btn-main-product">View Product</a>
                            </div>
                        </div>
                        <div class="card-product-info">
                    <a id="${nameLinkId}" href="${productUrl}" class="title link" data-slug="${p.slug}">${p.name}</a>
                            ${priceHtml}
                            <ul class="list-colorproduct">${colorHtml}</ul>
                        </div>
                    </div>
                `;
                resultsDiv.appendChild(col);
            });
         }

        function setupSwatchHoverAndClick() {
            document.querySelectorAll(".card-product").forEach(card => {
                const mainImage = card.querySelector(".main-product-image");
                const hoverImage = card.querySelector(".img-hover");
                const swatches = card.querySelectorAll(".list-pcolor-item.color-swatch");
                const viewBtn = card.querySelector(".btn-main-product");
                const productAnchor = card.querySelector(".product-img");
                const productTextLink = card.querySelector(".title.link");

                let activeImage = mainImage?.getAttribute("data-src") || "";

                swatches.forEach(swatch => {
                    const swatchImage = swatch.getAttribute("data-image");
                    const slug = swatch.getAttribute("data-slug");
                    const colorSlug = swatch.getAttribute("data-colorslug");
                    const typeSlug = swatch.getAttribute("data-typeslug");

                    swatch.addEventListener("mouseenter", () => {
                        if (mainImage && hoverImage && swatchImage) {
                            hoverImage.src = swatchImage;
                            mainImage.src = swatchImage;
                        }

                        // Update links during hover
                        const productUrl = `/home/productdetails/${slug}/${typeSlug}/${colorSlug}`;
                        if (viewBtn) viewBtn.href = productUrl;
                        if (productAnchor) productAnchor.href = productUrl;
                        if (productTextLink) productTextLink.href = productUrl;

                    });

                    swatch.addEventListener("click", () => {
                        // Set clicked swatch as active
                        swatches.forEach(s => s.classList.remove("active"));
                        swatch.classList.add("active");

                        // Update images to stay
                        activeImage = swatchImage;
                        if (mainImage && hoverImage && activeImage) {
                            mainImage.src = activeImage;
                            hoverImage.src = activeImage;
                        }

                        // Update links
                        const productUrl = `/home/productdetails/${slug}/${typeSlug}/${colorSlug}`;
                        if (viewBtn) viewBtn.href = productUrl;
                        if (productAnchor) productAnchor.href = productUrl;
                        if (productTextLink) productTextLink.href = productUrl;
                    });
                });

                // Optional: set default active if needed
                const defaultActive = card.querySelector(".list-pcolor-item.color-swatch.active");
                if (defaultActive) {
                    const defaultImage = defaultActive.getAttribute("data-image");
                    if (mainImage && hoverImage && defaultImage) {
                        mainImage.src = defaultImage;
                        hoverImage.src = defaultImage;
                    }
                }
            });
        }

    </script>
    <script src="~/content/js/parallax.min.js"></script>
    <style>
        .on-sale-wrap {
            position: absolute;
            top: 10px;
            left: 10px;
            z-index: 10;
        }

        .on-sale-item {
            background-color: red;
            color: white;
            padding: 4px 8px;
            font-size: 0.75rem;
            font-weight: bold;
            border-radius: 4px;
        }

        .list-colorproduct {
            list-style: none;
            padding-left: 0;
            display: flex;
            justify-content: center;
            gap: 5px;
            border: 1px solid transparent;
        }

        .list-pcolor-item {
            position: relative;
            width: 30px;
            height: 30px;
            padding: 3px;
            border: 1px solid transparent;
            border-radius: 6px;
        }

        .swatch-value {
            display: inline-block;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 1px solid #ccc;
        }

        .list-colorproduct .list-pcolor-item {
            width: 24px;
            height: 24px;
            border: 1px solid transparent;
            background-color: transparent;
            -webkit-transition: all 0.4s ease;
            -moz-transition: all 0.4s ease;
            -ms-transition: all 0.4s ease;
            -o-transition: all 0.4s ease;
            transition: all 0.4s ease;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

            .list-colorproduct .list-pcolor-item img {
                visibility: hidden;
                width: 18px;
                height: 18px;
                position: absolute;
            }

            .list-colorproduct .list-pcolor-item.line {
                border: 1px solid var(--line);
            }

            .list-colorproduct .list-pcolor-item.active, .list-colorproduct .list-pcolor-item:hover {
                border-color: var(--main);
            }

            .list-colorproduct .list-pcolor-item.active .swatch-value, .list-colorproduct .list-pcolor-item:hover .swatch-value {
                border-color: var(--white);
            }
    </style>
</body>
</html>